const TRANSLATIONS_FR = {
    "5 line sequence for Mozdor jumps.": null,
    "AABB": null,
    "Accessory": "Accessoire",
    "ActorDB": null,
    "Actors like": "Acteurs similaires",
    "After first 'go', will always retry even after disconnect": "Apr√®s le premier ¬´ essai ¬ª, r√©essayer toujours, m√™me apr√®s une d√©connexion.",
    "Anchor": "Ancre",
    "Automatically wrap input into void main() {...} entry point": "Envelopper automatiquement l'entr√©e dans le point d'entr√©e void main() {...}",
    "Base": null,
    "Camera": "Cam√©ra",
    "Code empty": "Code vide",
    "Collectible": null,
    "Configure + Begin record": "Configurer + Commencer l'enregistrement",
    "Connect/Retry Mode": "Mode connexion/nouvelle tentative",
    "Coords": "Coordonn√©es",
    "Copied linecount:": "Copi√© lignes:",
    "Creature": "Cr√©ature",
    "Cutscene": "Cin√©matique",
    "DebugPause increment/decrement": "Augmentation/diminution de DebugPause",
    "Download remote file (browser save + display below)": "T√©l√©charger le fichier distant (enregistrement dans le navigateur + affichage ci-dessous)",
    "Dump Destination": "Destination du dump",
    "Dump Format": "Format du dump",
    "Dump only to sdcard (relative to sdcard:/totk_lotuskit/ by default)": "Dump uniquement sur la carte SD (par rapport √† sdcard:/totk_lotuskit/ par d√©faut)",
    "Dump only to ws (output below)": "Dump uniquement sur ws (sortie ci-dessous)",
    "E": null, // east
    "Enemy": "Ennemi",
    "Enter Text": null,
    "EventDB": null,
    "EventFlows like": "EventFlows similaires",
    "Expand/Collapse": "D√©velopper/R√©duire",
    "Frame": "Cadre",
    "GMDHash": null,
    "GameData hashes like": "Hashes GameData similaires",
    "GameName": "NomJeu",
    "Input sequence for optimal running.": null,
    "Input sequence ZR -> X -> Y for frame-perfect cancel.": null,
    "Jumpslash Cancel": null,
    "LStick": null,
    "Location": "Emplacement",
    "Manages AngelScript execution/playback for the tas stack": "G√®re l'ex√©cution/la lecture d'AngelScript pour la pile tas",
    "Manages tas dumps/transfers": "G√®re les dumps/transferts tas",
    "Members": "Membres",
    "Memory search": "Recherche en m√©moire",
    "Mod Socket": "Prise Mod",
    "Model": "Mod√®le",
    "Move by": "D√©placer de",
    "Must 'go' again after disconnect": "Doit ¬´ repartir ¬ª apr√®s la d√©connexion",
    "N": null,
    "NE": null,
    "NPC": "PNJ",
    "NW": "NO",
    "Object": "Objet",
    "Open sdcard browser": "Ouvrir le navigateur sdcard",
    "Open Visual TAS Editor": null,
    "Open/Toggle AngelScript notebook": "Ouvrir/Basculer le bloc-notes AngelScript",
    "Optimal Mozdor": null,
    "Optimal Run": null,
    "Other": "Autre",
    "Owners": "Propri√©taires",
    "Perfect day (noon, clear fog, clear weather, clear wind)": "Journ√©e parfaite (midi, pas de brouillard, ciel d√©gag√© et pas de vent)",
    "Perfect night (midnight, clear+hack fog, clear weather, clear wind)": "Nuit parfaite (minuit, pas de brouillard+hack, ciel d√©gag√© et pas de vent)",
    "PhilName": "NomPhil",
    "Poll forever": "Sondage permanent",
    "Poll until success": "Sondage jusqu'√† r√©ussite",
    "Quick dumps": "Dumps rapides",
    "REC": null,
    "Remote files": "Fichiers distants",
    "Run the script below": "Ex√©cuter le script ci-dessous",
    "S": null,
    "SE": null,
    "SW": "SO",
    "Select": "S√©lectionner",
    "Session Recents": "Sessions r√©centes",
    "Stam": "Endur",
    "Try once": "Essayer une fois",
    "Types": null,
    "Upload remote file (using contents below)": "T√©l√©charger le fichier distant (√† l'aide du contenu ci-dessous)",
    "Use default AngelScript format": "Utiliser le format AngelScript par d√©faut",
    "Use line-based nx-TAS format": "Utiliser le format nx-TAS bas√© sur les lignes",
    "View remote file (display below)": "Afficher le fichier distant (affichage ci-dessous)",
    "W": "O",
    "World": "Monde",
    "[tas output]": "[sortie tas]",
    "abort": "interrompre",
    "absolute, main, ...": "absolu, principal, ...",
    "actorName": "nomActeur",
    "always exhausted": "toujours √©puis√©",
    "always fast recover": "toujours r√©cup√©ration rapide",
    "ang vel": "vit ang",
    "angv": null,
    "assign": "assigner",
    "at": "√†",
    "builtin": "int√©gr√©",
    "camera.pos_y = target.pos_y + elev": null,
    "checked": "s√©lectionn√©",
    "clear": "supprimer",
    "code": null,
    "connect ws": "connecter ws",
    "copy": "copie",
    "crashes on console": "plante sur console",
    "dist": null,
    "double": null,
    "down": "bas",
    "drag to move window": "glisser pour d√©placer la fen√™tre",
    "dump": "dump",
    "east": "est",
    "editor": null,
    "eg": "ex",
    "elev": "√©l√©v",
    "empty folder": "dossier vide",
    "end pause freezing": "fin de la pause de gel",
    "engine": "moteur",
    "esc when focused to close": "Appuyez sur √âchap lorsque le focus est activ√© pour fermer.",
    "ext": "√©tendu",
    "find in objmap": "trouver dans objmap",
    "float": null,
    "follow": "suivre",
    "force unpause": "forcer la reprise",
    "format as hex or decimal": "format hexad√©cimal ou d√©cimal",
    "fpshacks": null,
    "go": "aller",
    "heap": null,
    "heaps": null,
    "hold controls based on current view": "conserver les commandes bas√©es sur la vue actuelle",
    "hooks": null,
    "input": "entr√©e",
    "label": "√©tiquette",
    "never recover": "ne jamais r√©cup√©rer",
    "new": "nouveau",
    "north": "nord",
    "null": null,
    "objmap": null,
    "optional filter by name": "filtre facultatif par nom",
    "pause": null,
    "pos": null,
    "pos+": null,
    "pos-": null,
    "rel": null,
    "relative": "relatif",
    "reset": "r√©init",
    "reset/default": "r√©initialisation/par d√©faut",
    "rot": null,
    "rot_physics": "rot_physique",
    "rotate relative to actor": "rotation par rapport √† l'acteur",
    "selector arg": "arg s√©lecteur",
    "slot_i": "emplacement_i",
    "south": "sud",
    "spawn": null,
    "step ahead (controller passthrough)": "avance (passage du contr√¥leur)",
    "step ahead (in an already-running script)": "avancer (dans un script d√©j√† en cours d'ex√©cution)",
    "string": null,
    "target camera to selected actor slot": "cibler la cam√©ra sur l'emplacement de l'acteur s√©lectionn√©",
    "target ptr": "ptr cible",
    "text": "texte",
    "threads": null,
    "txt": null,
    "ui": null,
    "\xa0up\xa0": "haut",
    "up": "haut",
    "up is Link's forward": "en haut, c'est Link qui avance",
    "up is: 0 south, PI north, -PI_2 west, +PI_2 east": "haut est : 0 sud, PI nord, -PI_2 ouest, +PI_2 est",
    "update subsdk9 (drop onto button)": "mettre √† jour subsdk9 (d√©poser sur le bouton)",
    "update with ActorWatcher position": "mise √† jour avec la position ActorWatcher",
    "user": "utilisateur",
    "vel": "vit",
    "west": "ouest",
    "ws": null,
    "ws closed": "ws ferm√©",
    "ws open try": "essayer d'ouvrir ws",
    "xz distance from target (offset = dist * direction)": "distance xz par rapport √† la cible (d√©calage = dist * direction)",

    "+ Input Line": "+ Ligne Input",
    "Compact": "Nettoyer",
    "Merge identical input rows": "Fusionner les lignes d'entr√©e identiques",
    "Import": "Importer",
    "üìö Presets": null,
    "Lines:": "Lignes:",
    "Total Frames:": null,
    "Update Code üöÄ": null,
    "// Comment": "// Commentaire",
    "For Loop": "Boucle (for)",
    "Gyro: Set": null,
    "Gyro: Clear": null,
    "Set Pos/Rot": null,
    "Duration / Type": "Dur√©e / Type",
    "Importing a TAS Script (AS)": "Importation d'un script TAS (AS)",
    "Paste your code below. (Replaces all)": "Collez votre code ci-dessous. (Remplace tout)",
    "Cancel": "Annuler",
    "Load the Script": "Charger le script",
    "Preset Library": "Biblioth√©que de Presets",
    "Click to insert after the selection.": "Cliquez pour ins√©rer √† la suite de la s√©lection.",
    "Close": "Fermer",

    "execscript_placeholder": '// consultez le bouton bleu ASüìñ ci-dessous pour obtenir de l\'aide \nPlayer.pos += 100*Vector3f::UP;\n\ninput(30, A|B, 32767,-32768, 0,0);\ninput(15, B, 0.5*STICK_UP_MAX /*, 8000*STICK_LEFT */);\n\nactor::createAndWatch( \n    1, "SpObj_LiftGeneratorWing_A_01", \n    Player.pos + 5*Vector3f::DOWN\n);\n\ntas::awaitExecFile("sdcard:/totk_lotuskit/autorun.as");',

};

const DEFAULT_LANG = "en";
const TRANSLATIONS = {
    "fr": TRANSLATIONS_FR,
    // "es": TRANSLATIONS_ES,
    "en": {
        "execscript_placeholder": '// check blue ASüìñ button below for help \nPlayer.pos += 100*Vector3f::UP;\n\ninput(30, A|B, 32767,-32768, 0,0);\ninput(15, B, 0.5*STICK_UP_MAX /*, 8000*STICK_LEFT */);\n\nactor::createAndWatch( \n    1, "SpObj_LiftGeneratorWing_A_01", \n    Player.pos + 5*Vector3f::DOWN\n);\n\ntas::awaitExecFile("sdcard:/totk_lotuskit/autorun.as");',
    },
};

function getLang() {
    // return "fr"; // test TODO sessionStorage override?
    if (navigator.languages === undefined || navigator.languages.length < 1) {
        return DEFAULT_LANG;
    }
    for (var i=0; i < navigator.languages.length; i++) {
        const lang = navigator.languages[i].split("-")[0].toLowerCase(); // drop region, eg "en-US" -> "en"
        if (lang in TRANSLATIONS) {
            return lang; // preference for supported language found
        }
    }
    return DEFAULT_LANG;
}

function getText(str) {
    //console.log(str); // dump all strings queried
    const tr = TRANSLATIONS[getLang()];
    const out = tr[str];
    return out ? out : str; // return original string if no translation found
}

function translateSelectedElementText(selector) {
    document.querySelectorAll(selector).forEach(element => {
        if (element.children.length > 0) { return; } // leaf elements only
        element.textContent = getText(element.textContent);
        if (element.title) {
            element.title = getText(element.title);
        }
    });
}

export { getText, translateSelectedElementText };

